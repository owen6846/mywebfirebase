"use strict";(self["webpackChunkweb_vue"]=self["webpackChunkweb_vue"]||[]).push([[869],{8869:function(t,e,n){n.r(e),n.d(e,{default:function(){return B}});var l=n(6768);const a={class:"document-view"},i={class:"container py-4"};function o(t,e,n,o,c,s){const u=(0,l.g2)("document-list-component");return(0,l.uX)(),(0,l.CE)("div",a,[(0,l.Lk)("div",i,[(0,l.bF)(u)])])}var c=n(4232);const s={class:"document-list-container"},u={key:0,class:"nav nav-tabs mb-4"},r={class:"nav-item"},d={class:"nav-item"},m={key:1,class:"alert alert-danger"},v={key:2,class:"document-table-container"},k={class:"table table-hover document-table"},p=["href","download"],b={key:3,class:"document-table-container"},h={class:"table table-hover document-table"},L=["href","download"],g={key:4,class:"no-documents-message"},f={key:5,class:"no-documents-message"},D={key:6,class:"login-to-view mt-4"},y={class:"card"},w={class:"card-body text-center"};function _(t,e,n,a,i,o){const _=(0,l.g2)("loading-component"),C=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",s,[e[11]||(e[11]=(0,l.Lk)("h2",{class:"section-title"},"相關文件下載",-1)),a.isAuthenticated?((0,l.uX)(),(0,l.CE)("ul",u,[(0,l.Lk)("li",r,[(0,l.Lk)("button",{class:(0,c.C4)(["nav-link",{active:"public"===a.activeTab}]),onClick:e[0]||(e[0]=t=>a.activeTab="public")},"公開文件",2)]),(0,l.Lk)("li",d,[(0,l.Lk)("button",{class:(0,c.C4)(["nav-link",{active:"private"===a.activeTab}]),onClick:e[1]||(e[1]=t=>a.activeTab="private")},"需登入文件",2)])])):(0,l.Q3)("",!0),(0,l.bF)(_,{show:a.loading,message:"載入文件列表中..."},null,8,["show"]),a.error?((0,l.uX)(),(0,l.CE)("div",m,(0,c.v_)(a.error),1)):(0,l.Q3)("",!0),"public"===a.activeTab&&a.publicDocuments.length>0?((0,l.uX)(),(0,l.CE)("div",v,[(0,l.Lk)("table",k,[e[3]||(e[3]=(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"文件名稱"),(0,l.Lk)("th",null,"類型"),(0,l.Lk)("th",null,"檔案大小"),(0,l.Lk)("th",null,"上傳日期"),(0,l.Lk)("th",null,"操作")])],-1)),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.publicDocuments,(t=>((0,l.uX)(),(0,l.CE)("tr",{key:t.id},[(0,l.Lk)("td",null,(0,c.v_)(t.title),1),(0,l.Lk)("td",null,(0,c.v_)(a.formatFileType(t.file_type)),1),(0,l.Lk)("td",null,(0,c.v_)(a.formatFileSize(t.file_size)),1),(0,l.Lk)("td",null,(0,c.v_)(a.formatDate(t.created_at)),1),(0,l.Lk)("td",null,[(0,l.Lk)("a",{href:a.getDocumentUrl(t),class:"btn btn-sm btn-primary",download:t.title,target:"_blank"},e[2]||(e[2]=[(0,l.Lk)("i",{class:"bi bi-download me-1"},null,-1),(0,l.eW)(" 下載 ")]),8,p)])])))),128))])])])):(0,l.Q3)("",!0),"private"===a.activeTab&&a.privateDocuments.length>0?((0,l.uX)(),(0,l.CE)("div",b,[(0,l.Lk)("table",h,[e[5]||(e[5]=(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"文件名稱"),(0,l.Lk)("th",null,"類型"),(0,l.Lk)("th",null,"檔案大小"),(0,l.Lk)("th",null,"上傳日期"),(0,l.Lk)("th",null,"操作")])],-1)),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.privateDocuments,(t=>((0,l.uX)(),(0,l.CE)("tr",{key:t.id},[(0,l.Lk)("td",null,(0,c.v_)(t.title),1),(0,l.Lk)("td",null,(0,c.v_)(a.formatFileType(t.file_type)),1),(0,l.Lk)("td",null,(0,c.v_)(a.formatFileSize(t.file_size)),1),(0,l.Lk)("td",null,(0,c.v_)(a.formatDate(t.created_at)),1),(0,l.Lk)("td",null,[(0,l.Lk)("a",{href:a.getDocumentUrl(t),class:"btn btn-sm btn-primary",download:t.title,target:"_blank"},e[4]||(e[4]=[(0,l.Lk)("i",{class:"bi bi-download me-1"},null,-1),(0,l.eW)(" 下載 ")]),8,L)])])))),128))])])])):"public"!==a.activeTab||a.loading||a.error||0!==a.publicDocuments.length?"private"!==a.activeTab||a.loading||a.error||0!==a.privateDocuments.length?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",f,e[7]||(e[7]=[(0,l.Lk)("p",null,"暫無需登入的文件",-1)]))):((0,l.uX)(),(0,l.CE)("div",g,e[6]||(e[6]=[(0,l.Lk)("p",null,"暫無公開文件",-1)]))),a.isAuthenticated?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",D,[(0,l.Lk)("div",y,[(0,l.Lk)("div",w,[e[9]||(e[9]=(0,l.Lk)("h5",{class:"card-title mb-3"},"需要登入才能查看更多文件",-1)),e[10]||(e[10]=(0,l.Lk)("p",{class:"card-text"},"我們有更多文檔和手冊提供給註冊用戶下載使用",-1)),(0,l.bF)(C,{to:"/login",class:"btn btn-primary"},{default:(0,l.k6)((()=>e[8]||(e[8]=[(0,l.Lk)("i",{class:"bi bi-box-arrow-in-right me-2"},null,-1),(0,l.eW)(" 登入系統 ")]))),_:1})])])]))])}var C=n(144),E=n(782),F=n(4708),T=n(3244),X={name:"DocumentListComponent",components:{LoadingComponent:F.A},setup(){const t=(0,E.Pj)(),e=(0,C.KR)("public"),n=(0,l.EW)((()=>t.getters["documents/publicDocuments"])),a=(0,l.EW)((()=>t.getters["documents/privateDocuments"])),i=(0,l.EW)((()=>t.getters["documents/loading"])),o=(0,l.EW)((()=>t.getters["documents/error"])),c=(0,l.EW)((()=>t.getters["auth/isAuthenticated"])),s=async()=>{try{0===n.value.length&&await t.dispatch("documents/fetchPublicDocuments"),c.value&&0===a.value.length&&await t.dispatch("documents/fetchPrivateDocuments")}catch(o){console.error("載入文件列表失敗:",o)}},u=t=>T.A.getDocumentDownloadUrl(t.id,t.file_url,t.requires_login),r=t=>{const e={"application/pdf":"PDF","application/msword":"Word","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"Word","application/vnd.ms-excel":"Excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"Excel","image/jpeg":"JPEG","image/png":"PNG","text/plain":"TXT"};return e[t]||t},d=t=>t?t<1024?t+" B":t<1048576?(t/1024).toFixed(2)+" KB":t<1073741824?(t/1048576).toFixed(2)+" MB":(t/1073741824).toFixed(2)+" GB":"N/A",m=t=>{if(!t)return"N/A";try{const e=new Date(t);return e.toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit"})}catch(e){return console.warn("日期格式化失敗:",t),t}};return(0,l.wB)((()=>c.value),(e=>{e&&0===a.value.length&&t.dispatch("documents/fetchPrivateDocuments")})),(0,l.sV)((()=>{s()})),{activeTab:e,publicDocuments:n,privateDocuments:a,loading:i,error:o,isAuthenticated:c,getDocumentUrl:u,formatFileType:r,formatFileSize:d,formatDate:m}}},x=n(1241);const W=(0,x.A)(X,[["render",_],["__scopeId","data-v-29c7d280"]]);var A=W,P={name:"DocumentView",components:{DocumentListComponent:A}};const z=(0,x.A)(P,[["render",o]]);var B=z}}]);