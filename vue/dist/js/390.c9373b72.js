"use strict";(self["webpackChunkweb_vue"]=self["webpackChunkweb_vue"]||[]).push([[390],{2390:function(s,a,e){e.r(a),e.d(a,{default:function(){return Q}});var r=e(6768);const d={class:"password-update-view"},o={class:"container py-4"};function l(s,a,e,l,n,t){const i=(0,r.g2)("password-update-component");return(0,r.uX)(),(0,r.CE)("div",d,[(0,r.Lk)("div",o,[(0,r.bF)(i)])])}var n=e(4232),t=e(5130);const i={class:"password-update-container"},c={class:"card"},u={class:"card-body"},p={key:0,class:"alert alert-success"},w={key:1,class:"alert alert-danger"},v={class:"mb-3"},m=["disabled"],b={class:"mb-3"},f=["disabled"],k={class:"mb-3"},P=["disabled"],h={key:0,class:"form-text text-danger"},g={class:"d-grid"},L=["disabled"],y={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"};function C(s,a,e,d,o,l){return(0,r.uX)(),(0,r.CE)("div",i,[(0,r.Lk)("div",c,[a[8]||(a[8]=(0,r.Lk)("div",{class:"card-header bg-primary text-white"},[(0,r.Lk)("h4",{class:"mb-0"},"修改密碼")],-1)),(0,r.Lk)("div",u,[d.successMessage?((0,r.uX)(),(0,r.CE)("div",p,(0,n.v_)(d.successMessage),1)):(0,r.Q3)("",!0),d.error?((0,r.uX)(),(0,r.CE)("div",w,(0,n.v_)(d.error),1)):(0,r.Q3)("",!0),(0,r.Lk)("form",{onSubmit:a[3]||(a[3]=(0,t.D$)(((...s)=>d.handlePasswordUpdate&&d.handlePasswordUpdate(...s)),["prevent"]))},[(0,r.Lk)("div",v,[a[4]||(a[4]=(0,r.Lk)("label",{for:"oldPassword",class:"form-label"},"舊密碼",-1)),(0,r.bo)((0,r.Lk)("input",{type:"password",class:"form-control",id:"oldPassword","onUpdate:modelValue":a[0]||(a[0]=s=>d.oldPassword=s),required:"",disabled:d.loading,placeholder:"請輸入舊密碼"},null,8,m),[[t.Jo,d.oldPassword]])]),(0,r.Lk)("div",b,[a[5]||(a[5]=(0,r.Lk)("label",{for:"newPassword",class:"form-label"},"新密碼",-1)),(0,r.bo)((0,r.Lk)("input",{type:"password",class:"form-control",id:"newPassword","onUpdate:modelValue":a[1]||(a[1]=s=>d.newPassword=s),required:"",disabled:d.loading,placeholder:"請輸入新密碼"},null,8,f),[[t.Jo,d.newPassword]]),a[6]||(a[6]=(0,r.Lk)("div",{class:"form-text"},"密碼長度至少為 6 個字符",-1))]),(0,r.Lk)("div",k,[a[7]||(a[7]=(0,r.Lk)("label",{for:"confirmPassword",class:"form-label"},"確認新密碼",-1)),(0,r.bo)((0,r.Lk)("input",{type:"password",class:"form-control",id:"confirmPassword","onUpdate:modelValue":a[2]||(a[2]=s=>d.confirmPassword=s),required:"",disabled:d.loading,placeholder:"請再次輸入新密碼"},null,8,P),[[t.Jo,d.confirmPassword]]),!d.passwordsMatch&&d.confirmPassword?((0,r.uX)(),(0,r.CE)("div",h," 兩次輸入的密碼不一致 ")):(0,r.Q3)("",!0)]),(0,r.Lk)("div",g,[(0,r.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:d.loading||!d.isFormValid},[d.loading?((0,r.uX)(),(0,r.CE)("span",y)):(0,r.Q3)("",!0),(0,r.eW)(" "+(0,n.v_)(d.loading?"處理中...":"修改密碼"),1)],8,L)])],32)])])])}e(4114);var E=e(144),U=e(782),_=e(1387),V={name:"PasswordUpdateComponent",setup(){const s=(0,U.Pj)(),a=(0,_.rd)(),e=(0,E.KR)(""),d=(0,E.KR)(""),o=(0,E.KR)(""),l=(0,E.KR)(""),n=(0,r.EW)((()=>s.getters["auth/loading"])),t=(0,r.EW)((()=>s.getters["auth/error"])),i=(0,r.EW)((()=>d.value===o.value)),c=(0,r.EW)((()=>""!==e.value.trim()&&""!==d.value.trim()&&""!==o.value.trim()&&i.value&&d.value.length>=6)),u=async()=>{if(!c.value)return;l.value="";const r={old_password:e.value,new_password:d.value},n=await s.dispatch("auth/changePassword",r);n&&(l.value="密碼已成功修改",e.value="",d.value="",o.value="",setTimeout((()=>{a.push("/")}),1500))};return{oldPassword:e,newPassword:d,confirmPassword:o,successMessage:l,loading:n,error:t,passwordsMatch:i,isFormValid:c,handlePasswordUpdate:u}}},X=e(1241);const M=(0,X.A)(V,[["render",C],["__scopeId","data-v-11b98fbc"]]);var W=M,x={name:"PasswordUpdateView",components:{PasswordUpdateComponent:W}};const K=(0,X.A)(x,[["render",l]]);var Q=K}}]);